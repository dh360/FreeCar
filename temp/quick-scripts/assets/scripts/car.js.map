{"version":3,"sources":["car.js"],"names":["cc","Class","extends","Component","properties","moveDir","default","v2","displayName","tootltip","speed","toottip","speedType","start","console","log","node","getPosition","onLoad","move","degrees","misc","radiansToDegrees","Math","atan2","y","x","rotation","addDelta","mul","newPosition","position","add","setPosition","JSON","stringify","update","dt"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACR;AACAC,iBAAS;AACLC,qBAASN,GAAGO,EAAH,CAAM,CAAN,EAAS,CAAT,CADJ;AAELC,yBAAa,WAFR;AAGLC,sBAAU;AAHL,SAFD;AAOR;AACAC,eAAO;AACHJ,qBAAS,CADN;AAEHE,yBAAa,YAFV;AAGHG,qBAAS;AAHN,SARC;AAaRC,mBAAW;AACPN,qBAAS,MADF;AAEPE,yBAAa,WAFN;AAGPC,sBAAU;AAHH;AAbH,KAFP;AAqBLI,SArBK,mBAqBG;AACJC,gBAAQC,GAAR,CAAY,aAAZ;AACAD,gBAAQC,GAAR,CAAY,UAAZ,EAAwB,KAAKC,IAAL,CAAUC,WAAV,EAAxB;AACH,KAxBI;AAyBLC,UAzBK,oBAyBI,CAER,CA3BI;AA4BLC,QA5BK,kBA4BE;AACH;AACA,YAAIC,UAAUpB,GAAGqB,IAAH,CAAQC,gBAAR,CAAyBC,KAAKC,KAAL,CAAW,KAAKnB,OAAL,CAAaoB,CAAxB,EAA2B,KAAKpB,OAAL,CAAaqB,CAAxC,CAAzB,CAAd;AACA,aAAKV,IAAL,CAAUW,QAAV,GAAqB,KAAKP,OAA1B;AACA;AACA,YAAIQ,WAAW,KAAKvB,OAAL,CAAawB,GAAb,CAAiB,KAAKnB,KAAtB,CAAf;AACA,YAAIoB,cAAc,KAAKd,IAAL,CAAUe,QAAV,CAAmBC,GAAnB,CAAuBJ,QAAvB,CAAlB;AACAd,gBAAQC,GAAR,CAAY,UAAZ,EAAwBe,WAAxB;AACA,aAAKd,IAAL,CAAUiB,WAAV,CAAsBH,WAAtB;AACA,YAAIV,WAAW,EAAf,EAAmB;AACfN,oBAAQC,GAAR,CAAY,MAAZ;AACH;AACD,YAAIa,SAASF,CAAT,IAAc,CAAlB,EAAqB;AACjBZ,oBAAQC,GAAR,CAAY,MAAZ,EAAoBmB,KAAKC,SAAL,CAAeP,QAAf,CAApB;AACH;AACJ,KA3CI;AA6CLQ,UA7CK,kBA6CEC,EA7CF,EA6CM;AACPvB,gBAAQC,GAAR,CAAY,UAAZ,EAAwB,KAAKH,SAA7B;AACA,gBAAQ,KAAKA,SAAb;AACI,iBAAK,MAAL;AACI,qBAAKF,KAAL,GAAa,CAAb;AACA;;AAEJ,iBAAK,QAAL;AACI,qBAAKA,KAAL,GAAa,CAAb;AACA;;AAEJ,iBAAK,MAAL;AACI,qBAAKA,KAAL,GAAa,CAAb;AACA;;AAEJ;AACI;AAdR;;AAiBA,aAAKS,IAAL;AACH;AAjEI,CAAT","file":"car.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        //前进方向 \n        moveDir: {\n            default: cc.v2(0, 1),\n            displayName: 'move  dir',\n            tootltip: '移动方向'\n        },\n        //速度档位\n        speed: {\n            default: 0,\n            displayName: 'move speed',\n            toottip: '移动速度'\n        },\n        speedType: {\n            default: 'STOP',\n            displayName: 'speedType',\n            tootltip: '速度级别'\n        }\n    },\n    start() {\n        console.log('car组件 start');\n        console.log('初始化时的位置：', this.node.getPosition())\n    },\n    onLoad() {\n\n    },\n    move() {\n        // 改变方向\n        let degrees = cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y, this.moveDir.x));\n        this.node.rotation = 90 - degrees;\n        //改变位置\n        let addDelta = this.moveDir.mul(this.speed);\n        let newPosition = this.node.position.add(addDelta);\n        console.log('move 新位置', newPosition)\n        this.node.setPosition(newPosition);\n        if (degrees != 90) {\n            console.log('方向改变');\n        }\n        if (addDelta.x != 0) {\n            console.log('位置增量', JSON.stringify(addDelta));\n        }\n    },\n\n    update(dt) {\n        console.log('更新 速度类型 ', this.speedType);\n        switch (this.speedType) {\n            case 'STOP':\n                this.speed = 0;\n                break;\n\n            case 'NORMAL':\n                this.speed = 1;\n                break;\n\n            case 'FAST':\n                this.speed = 2;\n                break;\n\n            default:\n                break;\n        }\n\n        this.move();\n    }\n});"]}